/*! For license information please see provider.cast.js.LICENSE.txt */
"use strict";(self.webpackChunkjwplayer=self.webpackChunkjwplayer||[]).push([[977],{5137:function(e,t,a){a.d(t,{Z:function(){return _}});var r=a(7582),i=a(4406),n={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"};function s(e,t){for(var a,r,i,n=e.length,s="",d=t||0;d<n;)if(0!==(a=e[d++])&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(a);break;case 12:case 13:r=e[d++],s+=String.fromCharCode((31&a)<<6|63&r);break;case 14:r=e[d++],i=e[d++],s+=String.fromCharCode((15&a)<<12|(63&r)<<6|(63&i)<<0)}return s}function d(e){var t=function(e){for(var t="0x",a=0;a<e.length;a++)e[a]<16&&(t+="0"),t+=e[a].toString(16);return parseInt(t)}(e);return 127&t|(32512&t)>>1|(8323072&t)>>2|(2130706432&t)>>3}var c=a(7880),u=a(8700),o=a(5322);function l(){var e=this.video.textTracks,t=(0,o.hX)(e,(function(e){return(e.inuse||!e._id)&&g(e.kind)}));if(this._textTracks&&!f.call(this,t)){for(var a=-1,r=0;r<this._textTracks.length;r++)if("showing"===this._textTracks[r].mode){a=r;break}a!==this._currentTextTrackIndex&&this.setSubtitlesTrack(a+1)}else this.setTextTracks(e)}function f(e){var t=this._textTracks,a=this._tracksById;if(e.length>t.length)return!0;for(var r=0;r<e.length;r++){var i=e[r];if(!i._id||!a[i._id])return!0}return!1}function v(e){var t=e.track;t&&t._id||this.setTextTracks(this.video.textTracks)}function T(e){var t=e.target,a=t.activeCues,r=t.cues,i=t._id,n=this._cues,s=this._activeCues;if(r&&r.length){var d=n[i];n[i]=Array.prototype.slice.call(r),this.parseNativeID3Cues(r,d)}else delete n[i];if(a&&a.length){var c=s[i],u=s[i]=Array.prototype.slice.call(a);this.triggerActiveCues(u,c)}else delete s[i]}function m(e,t,a){if(c.Browser.ie){var r=a;(e||"metadata"===t.kind)&&(r=new window.TextTrackCue(a.startTime,a.endTime,a.text),a.value&&(r.value=a.value)),function(e,t){var a=[],r=e.mode;e.mode="hidden";var i=e.cues;if(i)for(var n=i.length-1;n>=0&&i[n].startTime>t.startTime;n--)a.unshift(i[n]),e.removeCue(i[n]);try{e.addCue(t),a.forEach((function(t){return e.addCue(t)}))}catch(e){console.error(e)}e.mode=r}(t,r)}else try{t.addCue(a)}catch(e){console.error(e)}}function h(e,t,a){t&&t.length&&(0,o.S6)(t,(function(t){var r=t._id||"";if(a&&(t._id=void 0),!c.Browser.ie&&!c.Browser.safari||!e||!/^(native|subtitle|cc)/.test(r)){if(c.Browser.ie&&"disabled"===t.mode||(t.mode="disabled",t.mode="hidden"),t.cues)for(var i=t.cues.length;i--;)t.removeCue(t.cues[i]);t.embedded||(t.mode="disabled"),t.inuse=!1}}))}function g(e){return"captions"===e||"subtitles"===e}function k(e){return/^native(?:captions|subtitles)/.test(e)}function p(e){var t,a=(void 0===(t=e)&&(t=[]),t.reduce((function(e,t){if(!("value"in t)&&"data"in t&&t.data instanceof ArrayBuffer){var a=new Uint8Array(t.data),r=a.length;t={value:{key:"",data:""}};for(var i=10;i<14&&i<a.length&&0!==a[i];)t.value.key+=String.fromCharCode(a[i]),i++;var c=19,u=a[c];3!==u&&0!==u||(u=a[++c],r--);var o=0;if(1!==u&&2!==u)for(var l=c+1;l<r;l++)if(0===a[l]){o=l-c;break}if(o>0){var f=s(a.subarray(c,c+=o),0);if("PRIV"===t.value.key){if("com.apple.streaming.transportStreamTimestamp"===f){var v=1&d(a.subarray(c,c+=4)),T=d(a.subarray(c,c+=4))+(v?4294967296:0);t.value.data=T}else t.value.data=s(a,c+1);t.value.info=f}else t.value.info=f,t.value.data=s(a,c+1)}else{var m=a[c];t.value.data=1===m||2===m?function(e,t){for(var a=e.length-1,r="",i=t||0;i<a;)254===e[i]&&255===e[i+1]||(r+=String.fromCharCode((e[i]<<8)+e[i+1])),i+=2;return r}(a,c+1):s(a,c+1)}}if(n.hasOwnProperty(t.value.key)&&(e[n[t.value.key]]=t.value.data),t.value.info){var h=e[t.value.key];h!==Object(h)&&(h={},e[t.value.key]=h),h[t.value.info]=t.value.data}else e[t.value.key]=t.value.data;return e}),{}));return{metadataType:"id3",metadataTime:e[0].startTime,metadata:a}}function y(e,t){return e.startTime===t.startTime&&e.endTime===t.endTime&&e.text===t.text&&e.data===t.data&&JSON.stringify(e.value)===JSON.stringify(t.value)}var _={_itemTracks:null,_textTracks:null,_currentTextTrackIndex:-1,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_unknownCount:0,_activeCues:null,_cues:null,textTrackChangeHandler:null,addTrackHandler:null,cueChangeHandler:null,renderNatively:!1,_initTextTracks:function(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._cues={},this._activeCues={},this._unknownCount=0},addTracksListener:function(e,t,a){e&&(this.removeTracksListener(e,t,a),this.instreamMode||(e.addEventListener?e.addEventListener(t,a):e["on"+t]=a))},removeTracksListener:function(e,t,a){e&&(e.removeEventListener&&a?e.removeEventListener(t,a):e["on"+t]=null)},clearTracks:function(){var e=this;(0,r.V)(this._itemTracks);var t=this._tracksById;if(t&&Object.keys(t).forEach((function(a){if(0===a.indexOf("nativemetadata")){var r=t[a];e.cueChangeHandler&&r.removeEventListener("cuechange",e.cueChangeHandler),h(e.renderNatively,[r],!0)}})),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._currentTextTrackIndex=-1,this._activeCues={},this._cues={},this.renderNatively){var a=this.video.textTracks;this.textTrackChangeHandler&&this.removeTracksListener(a,"change",this.textTrackChangeHandler),h(this.renderNatively,a,!0)}},clearMetaCues:function(){var e=this,t=this._tracksById,a=this._cachedVTTCues;t&&a&&Object.keys(t).forEach((function(r){if(0===r.indexOf("nativemetadata")){var i=t[r];h(e.renderNatively,[i],!1),i.mode="hidden",i.inuse=!0,i._id&&(a[i._id]={})}}))},clearCueData:function(e){var t=this._cachedVTTCues;t&&t[e]&&(t[e]={},this._tracksById&&(this._tracksById[e].data=[]))},disableTextTrack:function(){var e=this.getCurrentTextTrack();if(e){e.mode="disabled";var t=e._id;(t&&k(t)||this.renderNatively&&c.OS.iOS)&&(e.mode="hidden")}},enableTextTrack:function(){var e=this.getCurrentTextTrack();e&&(e.mode="showing")},getCurrentTextTrack:function(){if(this._textTracks)return this._textTracks[this._currentTextTrackIndex]},getSubtitlesTrack:function(){return this._currentTextTrackIndex},addTextTracks:function(e){var t=this,a=[];return e?(this._textTracks||this._initTextTracks(),e.forEach((function(e){if(!(e.includedInManifest||e.kind&&!g(e.kind))){var i=t._createTrack(e);t._addTrackToList(i),a.push(i),e.file&&(e.data=[],(0,r.x)(e,(function(e){i.sideloaded=!0,t.addVTTCuesToTrack(i,e)}),(function(e){t.trigger(u.cM,e)})))}})),this._textTracks&&this._textTracks.length&&this.trigger(u.jt,{tracks:this._textTracks}),a):a},setTextTracks:function(e){var t=this;if(this._currentTextTrackIndex=-1,e){if(this._textTracks){var a=this._tracksById;this._activeCues={},this._cues={},this._unknownCount=0,this._textTracks=this._textTracks.filter((function(e){var r=e._id;return t.renderNatively&&r&&k(r)?(delete a[r],!1):(e.name&&0===e.name.indexOf("Unknown")&&t._unknownCount++,0===r.indexOf("nativemetadata")&&"com.apple.streaming"===e.inBandMetadataTrackDispatchType&&delete a[r],!0)}),this)}else this._initTextTracks();if(e.length)for(var r=0,n=e.length,s=this._tracksById,d=this._cuesByTrackId;r<n;r++){var c=e[r],o=c._id||"";if(!o){if(!1===c.inuse&&g(c.kind)&&this.renderNatively){c._id="native"+c.kind+r;continue}if(g(c.kind)||"metadata"===c.kind){if(o=c._id="native"+c.kind+r,!c.label&&"captions"===c.kind){var l=(0,i._)(c,this._unknownCount);c.name=l.label,this._unknownCount=l.unknownCount}}else o=c._id=(0,i.M)(c,this._textTracks?this._textTracks.length:0);if(s[o])continue;c.inuse=!0}if(c.inuse&&!s[o])if("metadata"===c.kind){c.mode="hidden";var f=this.cueChangeHandler=this.cueChangeHandler||T.bind(this);c.removeEventListener("cuechange",f),c.addEventListener("cuechange",f),s[o]=c}else if(g(c.kind)){var v=c.mode,h=void 0;if(c.mode="hidden",(!c.cues||!c.cues.length)&&c.embedded)continue;if(("disabled"!==v||k(o))&&(c.mode=v),d[o]&&!d[o].loaded){for(var p=d[o].cues;h=p.shift();)m(this.renderNatively,c,h);c.mode=v,d[o].loaded=!0}this._addTrackToList(c)}}this.renderNatively&&this.addTrackListeners(e),this._textTracks&&this._textTracks.length&&this.trigger(u.jt,{tracks:this._textTracks})}},addTrackListeners:function(e){var t=this.textTrackChangeHandler=this.textTrackChangeHandler||l.bind(this);this.removeTracksListener(e,"change",t),this.addTracksListener(e,"change",t),(c.Browser.edge&&c.Browser.ie||c.Browser.firefox)&&(t=this.addTrackHandler=this.addTrackHandler||v.bind(this),this.removeTracksListener(e,"addtrack",t),this.addTracksListener(e,"addtrack",t))},setupSideloadedTracks:function(e){if(this.renderNatively){var t=(e=e||null)===this._itemTracks;t||(0,r.V)(this._itemTracks),this._itemTracks=e,e&&(t||(this.disableTextTrack(),this._clearSideloadedTextTracks(),this.addTextTracks(e)))}},setSubtitlesTrack:function(e){if(this.renderNatively){if(this._textTracks&&(0===e&&this._textTracks.forEach((function(e){e.mode=e.embedded?"hidden":"disabled"})),this._currentTextTrackIndex!==e-1)){this.disableTextTrack(),this._currentTextTrackIndex=e-1;var t=this.getCurrentTextTrack();t&&(t.mode="showing"),this.trigger(u.UF,{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})}}else this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1)},createCue:function(e,t,a){return new(window.VTTCue||window.TextTrackCue)(e,Math.max(t||0,e+.25),a)},addVTTCue:function(e,t){this._tracksById||this._initTextTracks();var a=e.track?e.track:"native"+e.type,r=this._tracksById[a],i="captions"===e.type?"Unknown CC":"ID3 Metadata",n=e.cue;if(!r){var s={kind:e.type,_id:a,label:i,default:!1};this.renderNatively||"metadata"===s.kind?((r=this._createTrack(s)).embedded=!0,this.setTextTracks(this.video.textTracks)):r=this.addTextTracks([s])[0]}if(this._cacheVTTCue(r,n,t)){var d=this.renderNatively||"metadata"===r.kind;return d?m(d,r,n):r.data.push(n),n}return null},addVTTCuesToTrack:function(e,t){if(this.renderNatively){var a,r=e._id,i=this._tracksById,n=this._cuesByTrackId,s=i[r];if(!s)return n||(n=this._cuesByTrackId={}),void(n[r]={cues:t,loaded:!1});if(!n[r]||!n[r].loaded)for(n[r]={cues:t,loaded:!0};a=t.shift();)m(this.renderNatively,s,a)}},parseNativeID3Cues:function(e,t){var a=e[e.length-1];if(!t||t.length!==e.length||!a._parsed&&!y(t[t.length-1],a)){for(var r=[],i=[],n=-1,s=-1,d=-1,c=0;c<e.length;c++){var o=e[c];if(!o._extended&&(o.data||o.value)){if(o.startTime!==s||null===o.endTime){d=s,s=o.startTime;var l=r[n];if(r[++n]=[],i[n]=[],l&&s-d>0)for(var f=0;f<l.length;f++){var v=l[f];v.endTime=s,v._extended=!0}}r[n].push(o),o._parsed||(i[n].push(o),o.endTime-s<.25&&(o.endTime=s+.25),o._parsed=!0)}}for(var T=0;T<i.length;T++)if(i[T].length){var m=p(i[T]);this.trigger(u.O1,m)}}},triggerActiveCues:function(e,t){var a=this,r=e.filter((function(e){if(t&&t.some((function(t){return y(e,t)})))return!1;if(e.data)return!0;var r=e.text?function(e){var t;try{t=JSON.parse(e.text)}catch(e){return null}var a={metadataType:t.metadataType,metadataTime:e.startTime,metadata:t};return t.programDateTime&&(a.programDateTime=t.programDateTime),a}(e):null;if(r)"emsg"===r.metadataType&&(r.metadata=r.metadata||{},r.metadata.messageData=e.value),a.trigger(u.rx,r);else if(e.value)return!0;return!1}));if(r.length){var i=p(r);this.trigger(u.rx,i)}},ensureMetaTracksActive:function(){for(var e=this.video.textTracks,t=e.length,a=0;a<t;a++){var r=e[a];"metadata"===r.kind&&"disabled"===r.mode&&(r.mode="hidden")}},_cacheVTTCue:function(e,t,a){var r=e.kind,i=e._id,n=this._cachedVTTCues;n[i]||(n[i]={});var s,d=n[i];switch(r){case"captions":case"subtitles":s=a||Math.floor(20*t.startTime);var c="_"+(t.line||"auto"),u=Math.floor(20*t.endTime),o=d[s+c]||d[s+1+c]||d[s-1+c];return!(o&&Math.abs(o-u)<=1||(d[s+c]=u,0));case"metadata":var l=t.data?new Uint8Array(t.data).join(""):t.text;return!d[s=a||t.startTime+l]&&(d[s]=t.endTime,!0);default:return!1}},_addTrackToList:function(e){this._textTracks.push(e),this._tracksById[e._id]=e},_createTrack:function(e){var t,a=(0,i._)(e,this._unknownCount),r=a.label;if(this._unknownCount=a.unknownCount,this.renderNatively||"metadata"===e.kind){var n=this.video.textTracks;(t=(0,o._e)(n,{label:r}))||(t=this.video.addTextTrack(e.kind,r,e.language||"")),t.default=e.default,t.mode="disabled",t.inuse=!0}else(t=e).data=t.data||[];return t._id||(t._id=(0,i.M)(e,this._textTracks?this._textTracks.length:0)),t},_clearSideloadedTextTracks:function(){if(this._textTracks){var e=this._textTracks.filter((function(e){return e.embedded||"subs"===e.groupid}));this._initTextTracks();var t=this._tracksById;e.forEach((function(e){t[e._id]=e})),this._textTracks=e}}}},777:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var r=a(8700),i=a(5322),n=a(1026),s=a(6438);function d(e){var t=this,a=window.chrome.cast,d=a.media,c=window.cast.framework,u=c.CastContext.getInstance(),o=null,l=c.CastContextEventType.CAST_STATE_CHANGED,f=e||d.DEFAULT_MEDIA_RECEIVER_APP_ID;function v(e,a,r){var n=e.sources;e.allSources&&(n=e.allSources.slice(0).sort((function(e,t){return!e.default&&t.default?1:0})));var s=(0,i.sE)(n,(function(e){var t=!(0,i.dp)(e.mediaTypes)||!(0,i.r3)(e.mediaTypes,'video/webm; codecs="vp9"'),a=!(0,i.dp)(e.drm)||(0,i.Yj)(e.drm,(function(e,t){return"fairplay"!==t}));return t&&a}));if(s){var c=function(e){switch(e){case"mp4":case"webm":return"video/"+e;case"mpd":case"dash":return"application/dash+xml";case"m3u8":case"hls":return"application/x-mpegURL";case"aac":return"audio/x-aac";case"mp3":return"audio/mpeg";default:return e}}(s.type),u=T(s.file),o=e.image?T(e.image):null,l=s.drm,f=new d.MediaInfo(u,c);return f.metadata=new d.GenericMediaMetadata,f.metadata.title=e.title,f.metadata.subtitle=e.description,f.metadata.index=a||0,f.metadata.playerId=t.getPlayerId(),e.tracks&&e.tracks.length&&(f.tracks=e.tracks.filter((function(e){return e.kind&&!!d.TextTrackType[e.kind.toUpperCase()]})).map((function(e,t){var a=t+1,r=new d.Track(a,d.TrackType.TEXT);r.trackContentId=e.file,r.trackContentType="text/vtt",r.name=e.label||a;var i=r.subtype=d.TextTrackType[e.kind.toUpperCase()];return i!==d.TextTrackType.CAPTIONS&&i!==d.TextTrackType.SUBTITLES&&i!==d.TextTrackType.DESCRIPTION||(r.customData="side-loaded captions",r.language="en-US"),r}))),r&&(f.textTrackStyle=t.obtainTrackStyles(r)),o&&(f.metadata.images=[{url:o}]),l&&(f.customData={drm:l}),f}}function T(e){var t=document.createElement("a");return t.href=e,t.href}function m(){var e=u.getCastState()!==c.CastState.NO_DEVICES_AVAILABLE,a="";(o=u.getCurrentSession())&&(a=o.getCastDevice().friendlyName||a),t.trigger("castState",{available:e,active:!!o,deviceName:a})}function h(){var e=t.getMedia();e&&t.trigger("mediaUpdate",{field:"media",value:e})}function g(e){e.removeUpdateListener(h),e.addUpdateListener(h)}(0,i.l7)(t,n.ZP),u.removeEventListener(l,m),u.addEventListener(l,m),u.setOptions({receiverApplicationId:f,autoJoinPolicy:a.AutoJoinPolicy.ORIGIN_SCOPED}),t.updateCastState=m,t.setPlaylist=function(e){var a=e.get("playlist"),i=e.get("item"),n=e.mediaModel.get("currentTime"),c=e.get("repeat"),u=e.get("captions"),l=o.getSessionObj();if("complete"===e.get("state")&&(i=0,n=0),1!==a.length||e.get("related")){var f=[],T=1,m=0;1===a.length&&e.get("related")&&e.get("recItems")&&e.get("recItems").length&&a.push.apply(a,e.get("recItems"));for(var h=i;h<a.length;h++){var g=v(a[h],h,u),k=void 0;if(g){k=new d.QueueItem(g),g.metadata.index===i&&(k.startTime=n,m=f.length);var p=JSON.stringify(k).length+1;if(!(T+p<32e3))break;f.push(k),T+=p}}if(f.length){var y=new d.QueueLoadRequest(f);y.startIndex=m,c&&(y.repeatMode=d.RepeatMode.ALL),l.queueLoad(y,t.queueLoaded,t.queueErrored)}else t.trigger(r.cM,new s.rG(null,35e4,{info:"media not supported by Chromecast"}))}else{var _=v(a[i],i,u),x=new d.LoadRequest(_);x.autoplay=!0,x.currentTime=n,l.loadMedia(x,t.loaded,t.error)}},t.queueLoaded=function(e){t.loaded(e)},t.queueErrored=function(e){t.error(e)},t.getPlayerId=function(){var e=t.getMedia();return e&&e.media?e.media.metadata.playerId:o?o.getSessionObj().playerId:null},t.setPlayerId=function(e){o&&(o.getSessionObj().playerId=e)},t.loaded=function(e){t.trigger("mediaUpdate",{field:"volume",value:{volume:o.getVolume(),isMute:o.isMute()}}),g(e),t.play()},t.addListeners=function(){var e;if(!o)return null;(e=o.getSessionObj()).removeUpdateListener(m),e.addUpdateListener(m),e.removeMediaListener(g),e.addMediaListener(g),o.addEventListener(c.SessionEventType.VOLUME_CHANGED,(function(e){t.trigger("mediaUpdate",{field:"volume",value:e})}))},t.reset=function(){t.removeListeners(),u&&u.removeEventListener(l,m)},t.removeListeners=function(){if(o){var e=o.getSessionObj();e.removeUpdateListener(m),e.media.forEach((function(e){e.removeUpdateListener(h)})),o.removeEventListener(c.SessionEventType.VOLUME_CHANGED)}},t.getMedia=function(){if(o){var e=o.getSessionObj().media;if(e&&e.length)return e[0]}return null},t.error=function(e){t.trigger(r.cM,new s.rG(null,35e4,{errorCode:e})),t.disconnect()},t.item=function(e){var a=t.getMedia();if(a){var r=v(e),n=(0,i.sE)(a.items,(function(e){return e.media.contentId===r.contentId&&e.media.index===r.index}));n?a.queueJumpToItem(n.itemId):t.trigger("setPlaylist")}else t.trigger("setPlaylist")},t.play=function(){var e=t.getMedia();e&&e.play()},t.pause=function(){var e=t.getMedia();e&&e.pause()},t.next=function(){var e=t.getMedia();e&&e.queueNext()},t.disconnect=function(){o&&o.endSession(!0)},t.seek=function(e,a){var r=t.getMedia();if(r){var i=new d.SeekRequest;i.currentTime=e,i.resumeState=d.ResumeState.PLAYBACK_START,r.seek(i,a)}},t.mute=function(e){o&&o.setMute(e)},t.volume=function(e){o&&o.setVolume(e/100)},t.editTracksInfo=function(e,a){var r=t.getMedia();if(r){var i=new d.EditTracksInfoRequest(e,a);r.editTracksInfo(i)}},t.extractEmbeddedCaptions=function(){var e=t.getMedia();if(e&&e.media.tracks){var a=/\.dfxp/,r=e.media.tracks.filter((function(e){return"TEXT"===e.type&&"side-loaded captions"!==e.customData&&!a.test(e.trackContentId)})).map((function(e,t){return e.mapId=t,e.kind="subtitles",e.cues=[],e}));r.length&&t.trigger("mediaUpdate",{field:"captions",value:{tracks:r}})}},t.obtainTrackStyles=function(e){var t=function(e){return Math.round(e/100*255).toString(16)},a=new d.TextTrackStyle,r=function(e,t){return e&&e+t||void 0};return a.foregroundColor=r(e.color,t(e.fontOpacity)),a.backgroundColor=r(e.backgroundColor,t(e.backgroundOpacity)),a.windowColor=r(e.windowColor,t(e.windowOpacity)),a.fontFamily=e.fontFamily,a.fontStyle=d.TextTrackFontStyle.NORMAL,a.fontScale=e.fontSize/14,a.edgeType=function(e){var t=d.TextTrackEdgeType;switch(e){case"dropShadow":return t.DROP_SHADOW;case"raised":return t.RAISED;case"depressed":return t.DEPRESSED;case"uniform":return t.OUTLINE;default:return t.NONE}}(e.edgeStyle),a.windowType=d.TextTrackWindowType.NORMAL,a}}var c=a(4806),u=a(1140),o=a(5137),l=a(3985),f=function(e,t){var a,n,d,u=this,o=t.minDvrWindow;function f(){var e=window.chrome.cast.media.TextTrackType,t=n.getMedia(),a=0;if(!t)return a;var r=t.media.tracks;if(!r)return a;for(var i=0;i<r.length;i++){var s=r[i],d=s.subtype;if("TEXT"===s.type&&(d===e.CAPTIONS||d===e.SUBTITLES||d===e.DESCRIPTION)){a=i;break}}return a}function v(e){if(n){var t=Array.prototype.slice.call(arguments,1);n[e]&&n[e].apply(n,t)}}function T(e){if(n){var t=n.getMedia();return t?"currentTime"!==e||t.liveSeekableRange?t[e]||(t.media?t.media[e]:null):t.getEstimatedTime():null}}u.destroy=function(){clearInterval(u.timeInterval)},u.setService=function(e){n=e,u.updateScreen()},u.setup=function(e){u.setState(r.Kb),v("setup",e)},u.init=function(e){d!==e&&(d=e,v("item",e))},u.load=function(e){u.init(e),u.play()},u.play=function(){v("play")},u.pause=function(){v("pause")},u.seek=function(e){var t=T("currentTime");u.trigger(r.NZ,{position:u.getPosition(),offset:e,duration:u.getDuration(),currentTime:t,seekRange:u.getSeekRange(),metadata:{currentTime:t}}),e<0&&(e+=u.getSeekRange().end),v("seek",e,(function(){u.trigger(r.aQ)}))},u.next=function(e){v("next",e)},u.volume=function(e){v("volume",e)},u.mute=function(e){v("mute",e)},u.setSubtitlesTrack=function(e){e>0&&n.editTracksInfo([e+f()])},u.updateScreen=function(e,t){u.statusMessage=e,(0,c.nh)(a,function(e,t){return'<div class="jw-cast jw-reset jw-preview" style="'+(t?"background-image:url('"+t+"')":"")+'"><div class="jw-cast-container"><div class="jw-cast-text jw-reset">'+(e||"")+"</div></div></div>"}(e,t))},u.setContainer=function(e){a=e},u.getContainer=function(){return a},u.remove=function(){u.statusMessage=null,clearInterval(u.timeInterval)},u.getPosition=function(){var e=T("currentTime")||0,t=u.getDuration();if(T("liveSeekableRange")||t<0){var a=u.getSeekRange(),r=a.end,i=r-a.start;if((0,l.s)(i,o))return e-r}return e},u.getDuration=function(){var e=T("duration")||0;if(T("liveSeekableRange")||e<0){var t=u.getSeekRange(),a=t.end-t.start;return(0,l.s)(a,o)?-a:1/0}return e},u.getSeekRange=function(){var e=T("liveSeekableRange")||{start:0,end:Math.max(T("duration")||0,0)};return{start:e.start,end:e.end}},u.triggerTime=function(){var e=T("currentTime");(0,i.hj)(e)&&u.trigger(r.R2,{position:u.getPosition(),duration:u.getDuration(),currentTime:e,seekRange:u.getSeekRange(),metadata:{currentTime:e}})},u.stop=function(){u.clearTracks()},u.castEventHandlers={media:function(e){var t=T("items"),a="IDLE"===e.playerState&&"FINISHED"===e.idleReason,i="IDLE"===e.playerState&&"ERROR"===e.idleReason,d=a&&!t;u.castEventHandlers.playerState(d?"complete":e.playerState),u.castEventHandlers.currentTime(),clearInterval(u.timeInterval),"PLAYING"===e.playerState?u.timeInterval=setInterval(u.castEventHandlers.currentTime,100):d?u.setState("complete"):i&&(u.setState("error"),u.trigger(r.cM,new s.rG(null,35e4,e)),n.disconnect())},volume:function(e){u.trigger("volume",{volume:Math.round(100*e.volume)}),u.trigger("mute",{mute:e.isMute})},captions:function(e){u.clearTracks(),u.setTextTracks(e.tracks),u.trigger("subtitlesTracks",{tracks:e.tracks})},playerState:function(e){var t=[r.Kb,r.bc,r.r0,r._5,r.nQ,r.ik,r.xQ,r.Vy];if(e&&-1!==t.indexOf(e.toLowerCase())){var a=e.toLowerCase();if(a===r.bc||a===r.Kb){var n=T("currentTime");(0,i.hj)(n)&&u.trigger(r.uT,{bufferPercent:0,position:u.getPosition(),duration:u.getDuration(),currentTime:n,seekRange:u.getSeekRange()})}u.setState(a)}},currentTime:u.triggerTime,duration:u.triggerTime,isPaused:function(e){e?u.setState(r._5):u.setState(r.r0)},supports:function(){return!0}}};(0,i.l7)(f.prototype,u.Z,n.ZP,o.Z,{getName:function(){return{name:"chromecast"}},getQualityLevels:(0,i.a9)(["Auto"])});var v,T=f,m=a(5573),h=a(3569),g=v||(v=new Promise((function(e,t){window.__onGCastApiAvailable=function(a){a?e(a):t(),delete window.__onGCastApiAvailable},new m.ZP("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1").load().catch(t)}))),k={},p=function(e,t){var a=k[t.get("id")],n=null;function s(){var i=t.get("cast")||{};t.set("castState",{available:!1,active:!1,deviceName:""}),a&&(a.off(),a.reset()),(a=new d(i.customAppId)).on("castState",y),a.on("mediaUpdate",v),a.on("mediaUpdate",m),a.on("setPlaylist",c),a.on(r.cM,(function(t){e.trigger(r.cM,t)})),a.updateCastState(),k[t.get("id")]=a}function c(){t.set("state",r.Kb);var e=t.get("playlistItem");n.updateScreen("Connecting",e.image),a.setPlaylist(t)}function u(i){var s,d;i?(((d=t.get("castClicked"))||!a.getPlayerId())&&a.setPlayerId(t.get("id")),d&&_()&&(e.setFullscreen(!1),n=new T(t.get("id"),t.getConfiguration()),e.castVideo(n,t.get("playlistItem")),n.setService(a),a.addListeners(),(s=a.getMedia())?a.loaded(s):(a.on("mediaUpdate",p),c()),t.on("change:playlist",c),t.on("change:itemReady",o),t.change("captions",f))):n&&function(){var i=t.get("state"),s=i===r.xQ,d=i===r.bc,u=i===r.Vy,l=t.get("item"),f=t.get("playlist"),v=t.get("playlistItem");if(a.removeListeners(),n&&n.remove(),v&&u&&(void 0===(v=f[l+1])?s=!0:(t.set("item",l+1),t.set("playlistItem",v))),t.set("castActive",!1),t.set("castClicked",!1),e.stopCast(),t.off("change:playlist",c),t.off("change:itemReady",o),v)if(s)e.trigger(r.V$,{});else if(!d){var T=t.mediaModel;e.playVideo("interaction").catch((function(e){n&&T===t.mediaModel&&n.trigger("error",{message:e.message})}))}}()}function o(){a.extractEmbeddedCaptions(),n.setSubtitlesTrack(t.get("captionsIndex"))}function f(e,t){var r=a.getMedia();if(r){var i=a.obtainTrackStyles(t);a.editTracksInfo(r.activeTrackIds,i)}}function v(e){var a=e.field,r=e.value;if(n){"media"===a&&function(e){var a,r=t.get("playlist");if(e.media){var s=r[(a=e.media.metadata).index];(0,i.hj)(a.index)&&a.index!==t.get("item")&&(t.attributes.itemReady=!1,t.set("item",a.index),t.set("playlistItem",s),t.set("itemReady",!0));var d=t.get("castState").deviceName,c=d?"Casting to "+d:"";n.statusMessage&&n.statusMessage!==c&&n.updateScreen(c,s.image)}}(r);var s=n.castEventHandlers[a];s&&s(r)}}function m(e){"media"===e.field&&(a.off("mediaUpdate",m),o())}function p(e){if("media"===e.field){a.off("mediaUpdate",p);var r=e.value,i=r.currentTime,n=r.liveSeekableRange;if(!i&&n){var s=n.start,d=n.end;if(!t.mediaModel.get("currentTime")&&(0,l.s)(d-s,t.get("minDvrWindow"))){var c=d-t.get("dvrSeekLimit");a.seek(c)}}}}function y(e){var a=t.get("castActive"),r=e.active;a!==r&&u(r),r=r&&_(),t.set("castAvailable",e.available),t.set("castActive",r),t.set("castState",{available:e.available,active:r,deviceName:e.deviceName})}function _(){return a.getPlayerId()===t.get("id")}this.init=function(){return g.then(s)},this.castToggle=h.Z.noop,this.stopCasting=function(){return a&&a.disconnect()||h.Z.noop}}}}]);